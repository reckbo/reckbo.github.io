<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
  <!--<link href="http://gmpg.org/xfn/11" rel="profile">-->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <meta name="description" content="">
  <meta name="author" content="">
  <title>
    
      Information Theory, Inference, and Learning Algorithms in J - Bigrams &middot; reckbo
    
  </title>

  <!-- CSS -->
  <!--<link rel="stylesheet" href="/public/css/poole.css">-->
  <!--<link rel="stylesheet" href="/public/css/syntax.css">-->
  <!--<link rel="stylesheet" href="/public/css/hyde.css">-->
  <!--<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">-->
  <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">-->
  <link href='https://fonts.googleapis.com/css?family=Ultra' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/public/css/bootstrap.min.css">
  <link rel="stylesheet" href="/public/css/blog.css">
  <link rel="stylesheet" href="/public/css/syntax.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <script type="text/x-mathjax-config">
MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],
                       displayMath: [['\\[','\\]'], ['$$','$$']]}});
  </script>

  <script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-73199709-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

  <body>
      <div class="blog-masthead">
          <div class="container">
              <nav class="blog-nav">
                  <!--<a href="/" title="Home">reckbo</a>-->
                  
                  
                      <a class="blog-nav-item" href="/">Home </a>
                      &nbsp;&nbsp;&nbsp;
                  
                  
                  
                      <a class="blog-nav-item" href="/about">About </a>
                      &nbsp;&nbsp;&nbsp;
                  
                  
                  
                      <a class="blog-nav-item" href="/archive">Archive </a>
                      &nbsp;&nbsp;&nbsp;
                  
                  
                  
                      <a class="blog-nav-item" href="/reading">Reading </a>
                      &nbsp;&nbsp;&nbsp;
                  
                  
              </nav>
          </div>
      </div>

      <div class="container">
          <div class="blog-header">
              <!--<p class="lead blog-description"></p>-->
          </div>
          <div class="row">
              <div class="col-sm-8 blog-main">
    <div class="blog-post">
        <h2 class="blog-post-title">Information Theory, Inference, and Learning Algorithms in J - Bigrams</h2>
        <p class="blog-post-meta">28 Jan 2015</p>
        <p>Hereâ€™s a <a href="https://github.com/reckbo/Mackay03">J implementation</a> to reproduce
the probability distributions of the bigrams in the Linux FAQ, as shown in
section 2.1 of 
<a href="http://www.inference.phy.cam.ac.uk/mackay/itila/">Information Theory, Inference, and Learning Algorithms (Mackay 2003)</a>,</p>

<figure class="highlight"><pre><code class="language-j" data-lang="j"><span></span><span class="c1">NB. Roger Hui&#39;s functions for inverted tables</span>
<span class="c1">NB. http://www.jsoftware.com/jwiki/Essays/Inverted%20Table</span>
<span class="nv">require</span><span class="s">&#39;invertedt.ijs&#39;</span>  

<span class="c1">NB. Read in text file, make it lower case</span>
<span class="nv">faq</span><span class="o">=:</span><span class="nv">tolower</span><span class="o">@</span><span class="nv">freads</span><span class="s">&#39;linuxfaq.txt&#39;</span>

<span class="c1">NB. Define the outcomes we want to count - 27x27 possible bigrams made from</span>
<span class="c1">NB. english letters and a space</span>
<span class="nv">alphabet</span><span class="o">=:</span><span class="nv">a</span><span class="o">.</span> <span class="o">{~</span> <span class="mi">97</span><span class="o">+</span><span class="nv">i</span><span class="o">.</span><span class="mi">26</span>
<span class="nv">bigrams</span><span class="o">=:</span><span class="p">(</span><span class="o">,/</span><span class="p">)</span><span class="o">@</span><span class="p">(</span><span class="o">,&quot;</span><span class="mi">0</span><span class="o">/~</span><span class="p">)</span> <span class="nv">alphabet</span><span class="o">,</span><span class="s">&#39; &#39;</span>

<span class="c1">NB. Count all the bigrams and sort</span>
<span class="nv">tbigramsall</span><span class="o">=:</span><span class="nv">tsort</span> <span class="p">(</span><span class="o">~.</span> <span class="o">;</span> <span class="p">(</span><span class="o">#/.~</span><span class="p">))</span> <span class="mi">2</span> <span class="o">]\</span>  <span class="nv">faq</span>

<span class="c1">NB. Get the counts for only the outcomes we&#39;re interested in</span>
<span class="nv">tcounts</span><span class="o">=:</span><span class="p">((</span><span class="s">&#39;**&#39;</span><span class="o">;</span><span class="mi">0</span><span class="p">)</span> <span class="nv">tadd</span> <span class="nv">tbigramsall</span><span class="p">)</span> <span class="nv">tfrom</span><span class="o">~</span> <span class="p">(</span><span class="o">{.</span> <span class="nv">tbigramsall</span><span class="p">)</span> <span class="nv">tindexof</span> <span class="o">&lt;</span><span class="nv">bigrams</span>

<span class="c1">NB. compute 27x27 probability matrix</span>
<span class="nv">probarray</span><span class="o">=:</span> <span class="p">(</span><span class="o">]</span> <span class="o">%</span> <span class="o">+/</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">{:</span> <span class="nv">tcounts</span>  <span class="c1">NB. 729 array</span>
<span class="nv">prob</span><span class="o">=:</span> <span class="p">(</span><span class="mi">_27</span> <span class="o">]\</span> <span class="nv">probarray</span><span class="p">)</span>  <span class="c1">NB.  27x27 matrix</span>

<span class="c1">NB. Conditional probabilities</span>
<span class="nv">pyx</span><span class="o">=:</span> <span class="p">(</span><span class="o">%</span> <span class="o">+/&quot;</span><span class="mi">1</span><span class="p">)</span> <span class="nv">prob</span>
<span class="nv">pxy</span><span class="o">=:</span> <span class="p">(</span><span class="o">%</span> <span class="o">+/&quot;</span><span class="mi">1</span><span class="p">)</span><span class="o">&amp;.|:</span> <span class="nv">prob</span>

<span class="c1">NB. Plot the results</span>
<span class="c1">NB. make squares proportional in size to each value in matrix y</span>
<span class="c1">NB. credit to Raul Miller http://jsoftware.com/pipermail/programming/2015-January/040848.html</span>
<span class="nv">square</span><span class="o">=:</span> <span class="p">(</span><span class="o">&gt;./~|</span><span class="nv">i</span><span class="o">:</span><span class="mi">12</span><span class="p">)</span><span class="o">%</span><span class="mi">12</span>
<span class="nv">mat2sq</span><span class="o">=:</span> <span class="mi">1</span><span class="o">&amp;$:</span> <span class="o">:</span> <span class="p">(</span><span class="mi">4</span> <span class="o">:</span> <span class="s">&#39;,/ 0 |: ,/ 0 2|: y &gt;:/ (square % x)&#39;</span><span class="p">)</span>

<span class="nv">require</span> <span class="s">&#39;viewmat&#39;</span>
<span class="nv">viewmat</span> <span class="mi">80</span> <span class="nv">mat2sq</span> <span class="nv">prob</span>
<span class="nv">viewmat</span> <span class="mf">2.</span><span class="mi">5</span> <span class="nv">mat2sq</span> <span class="nv">pyx</span>
<span class="nv">viewmat</span> <span class="mf">2.</span><span class="mi">5</span> <span class="nv">mat2sq</span> <span class="nv">pxy</span></code></pre></figure>

<p>Joint distribution</p>

<p><img src="https://raw.githubusercontent.com/reckbo/Mackay03/master/bigrams_prob.png" alt="" /></p>

<table>
  <tbody>
    <tr>
      <td>P(y</td>
      <td>x)</td>
    </tr>
  </tbody>
</table>

<p><img src="https://raw.githubusercontent.com/reckbo/Mackay03/master/bigrams_pyx.png" alt="" /></p>

<table>
  <tbody>
    <tr>
      <td>P(x</td>
      <td>y)</td>
    </tr>
  </tbody>
</table>

<p><img src="https://raw.githubusercontent.com/reckbo/Mackay03/master/bigrams_pxy.png" alt="" /></p>

<p><i><b>References</b></i></p>

<ul>
  <li>MacKay, David 2003, <strong><a href="http://www.inference.phy.cam.ac.uk/itprnn/book.pdf">Information Theory, Inference, and Learning Algorithms</a></strong></li>
</ul>

        </div>

    <div class="related">
        <h4>Related Posts</h4>
        <ul class="related-posts">
            
            <li>
            <a href="/2015/10/19/HTML-Scraping-with-a-Text-Browser/">
                HTML Scraping with a Text Browser
                <small>19 Oct 2015</small>
            </a>
            </li>
            
            <li>
            <a href="/2015/10/11/A-Computer-Science-Perspective-Helps/">
                A Computer Science Perspective Helps
                <small>11 Oct 2015</small>
            </a>
            </li>
            
            <li>
            <a href="/2015/09/27/Understanding-Code/">
                Understanding Code
                <small>27 Sep 2015</small>
            </a>
            </li>
            
            <li>
            <a href="/2015/09/20/An-Intuition-for-Exponentials/">
                An Intution for Exponentials
                <small>20 Sep 2015</small>
            </a>
            </li>
            
        </ul>

        <p></p>

        <!--<h3>Recent Posts</h3>-->
        <!--<ul class="related-posts">-->
            <!---->
            <!--<li>-->
            <!--<a href="/2015/10/19/HTML-Scraping-with-a-Text-Browser/">-->
                <!--HTML Scraping with a Text Browser-->
                <!--<small>-->
                    <!--19 Oct 2015-->
                <!--</small>-->
            <!--</a>-->
            <!--</li>-->
            <!---->
            <!--<li>-->
            <!--<a href="/2015/10/11/A-Computer-Science-Perspective-Helps/">-->
                <!--A Computer Science Perspective Helps-->
                <!--<small>-->
                    <!--11 Oct 2015-->
                <!--</small>-->
            <!--</a>-->
            <!--</li>-->
            <!---->
            <!--<li>-->
            <!--<a href="/2015/09/27/Understanding-Code/">-->
                <!--Understanding Code-->
                <!--<small>-->
                    <!--27 Sep 2015-->
                <!--</small>-->
            <!--</a>-->
            <!--</li>-->
            <!---->
            <!--<li>-->
            <!--<a href="/2015/09/20/An-Intuition-for-Exponentials/">-->
                <!--An Intution for Exponentials-->
                <!--<small>-->
                    <!--20 Sep 2015-->
                <!--</small>-->
            <!--</a>-->
            <!--</li>-->
            <!---->
        <!--</ul>-->
    </div>
</div>

              <!--<div class="sidebar">-->
  <!--[><div class="container sidebar-sticky"><]-->
  <!--<div class="container">-->

   
    <!--<nav class="sidebar-nav">-->

      <!--<h3>Recent Posts</h3>-->
      <!--<p>-->
      <!---->
          <!--<a class="sidebar-nav-item" href="/2015/10/19/HTML-Scraping-with-a-Text-Browser/">HTML Scraping with a Text Browser</a>-->
      <!---->
          <!--<a class="sidebar-nav-item" href="/2015/10/11/A-Computer-Science-Perspective-Helps/">A Computer Science Perspective Helps</a>-->
      <!---->
          <!--<a class="sidebar-nav-item" href="/2015/09/27/Understanding-Code/">Understanding Code</a>-->
      <!---->
          <!--<a class="sidebar-nav-item" href="/2015/09/20/An-Intuition-for-Exponentials/">An Intution for Exponentials</a>-->
      <!---->

    <!--</nav>-->

    <!--<p>&copy; 2016. All rights reserved.</p>-->
  <!--</div>-->
<!--</div>-->

<!--<div class="col-sm-3 col-sm-offset-1 blog-sidebar">-->
<div class="col-sm-3 blog-sidebar">

    <div class="sidebar-module sidebar-module-inset">
        <h4>About</h4>
        <p> I'm a software developer currently living in Melbourne, working remotely for the
            <a href="http://pnl.bwh.harvard.edu">Psychiatry Neuroimaging Laboratory</a>
             in Boston and
            a startup in Canada.  My interests are data analysis pipelines and inference,
            and I'm unduly obsessed with understanding design principles behind concise,
            uncomplicated software systems.
        </p>
    </div>

    <div class="sidebar-module sidebar-module-inset">
    <h4>Recent Posts</h4>
    <ol class="list-unstyled">
        
        <li class="sidebar-recent-posts">
        <a href="/2015/10/19/HTML-Scraping-with-a-Text-Browser/">
            HTML Scraping with a Text Browser
            <small>
                19 Oct 2015
            </small>
        </a>
        </li>
        
        <li class="sidebar-recent-posts">
        <a href="/2015/10/11/A-Computer-Science-Perspective-Helps/">
            A Computer Science Perspective Helps
            <small>
                11 Oct 2015
            </small>
        </a>
        </li>
        
        <li class="sidebar-recent-posts">
        <a href="/2015/09/27/Understanding-Code/">
            Understanding Code
            <small>
                27 Sep 2015
            </small>
        </a>
        </li>
        
        <li class="sidebar-recent-posts">
        <a href="/2015/09/20/An-Intuition-for-Exponentials/">
            An Intution for Exponentials
            <small>
                20 Sep 2015
            </small>
        </a>
        </li>
        
    </ol>
    <a href="/archive">Archive &raquo;</a>
  </div>

  <div class="sidebar-module sidebar-module-inset">
    <h4>Elsewhere</h4>
    <ol class="list-unstyled">
        <li><a href="http://github.com/reckbo ">GitHub</a></li>
        <li><a href="http://bitbucket.org/reckbo ">BitBucket</a></li>
      <li><a href="http://twitter.com/reckbo">Twitter</a></li>
    </ol>
  </div>

</div><!-- /.blog-sidebar -->

          </div>
      </div>

      <footer class="blog-footer">

  <p>&copy; 2016. All rights reserved.</p>

  <p>
    <a href="#">Back to top</a>
  </p>

</footer>



    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="/public/js/bootstrap.min.js"></script>
    <!--[> IE10 viewport hack for Surface/desktop Windows 8 bug <]-->
    <!--<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>-->

  </body>
</html>
